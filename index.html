<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Something Special ğŸŒ™</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- INITIAL BRIGHT CSS -->
  <link id="themeCSS" rel="stylesheet" href="bright.css">
  
  
</head>
<body class="night-bg">

  <!-- STEP 1: FIRST QUESTION -->
<div class="qa-box fade-in delay-2">
  <p class="qa-question">Heyâ€¦ wanna see what I made for you? ğŸ’«</p>
  <div class="qa-actions">
    <button class="qa-btn" onclick="showPartyMood()">Yes ğŸ¥º</button>
    <button class="qa-btn" onclick="showPartyMood()">Of course â¤ï¸</button>
  </div>
</div>

<!-- STEP 2: PARTY MOOD STATEMENT (BRIGHT CSS) -->
<div id="partyMood" style="display:none;" class="fade-in delay-2">
  <p>Isnâ€™t it too boringâ€¦ letâ€™s make it some party mood ğŸ‰</p>
  <button class="qa-btn" onclick="showBalloonPrompt()">Next âœ</button>
</div>

<!-- STEP 3: BALLOON PROMPT -->
<div id="balloonPrompt" style="display:none;" class="fade-in delay-2">
  <p>But firstâ€¦ let's add some balloons ğŸˆ</p>
  <button class="qa-btn" onclick="showBalloons()">Add Balloons</button>
</div>


  <!-- STEP 4: MUSIC PROMPT -->
  <div id="musicPrompt" style="display:none;" class="fade-in delay-2">
    <p>Something's missingâ€¦ click this to make it perfect ğŸµ</p>
    <button class="qa-btn" onclick="startMusic()">Add Music</button>
  </div>

  <!-- BALLOONS -->
  <div class="balloon-container"></div>

  <!-- STEP 5: MAIN CONTENT -->
  <div class="container" id="hiddenContent" style="display:none;">
    <h1 id="title">Something special for you ğŸŒ™</h1>
    <p id="message">Just a little surpriseâ€¦ itâ€™s worth it ğŸ’«
      <p>"Don't chase men Chase Atlantic" </p>
        <p>~ Thats what SHE SAID!</p>
      <p>
      <button id="musicToggle" class="enter-btn show-btn fade-in delay-3"></button>
    </p>
    <button class="enter-btn show-btn fade-in delay-3" onclick="enterSurprise()">Lets GOOO âœ</button>
  </div>

  <!-- BACKGROUND MUSIC -->
  <audio id="bgMusic" loop>
    <source src="swim.mp3" type="audio/mpeg">
  </audio>

  <script>
    const music = document.getElementById("bgMusic");
    const toggleBtn = document.getElementById("musicToggle");
    const balloonContainer = document.querySelector(".balloon-container");

    /* ---------- SWITCH CSS ---------- */
    function switchToMainCSS() {
      const themeLink = document.getElementById("themeCSS");
      if (themeLink) {
        themeLink.href = "style.css"; // your main CSS
      }
    }

    /* ---------- MUSIC SETUP ---------- */
    if (music && toggleBtn) {
      const savedTime = localStorage.getItem("musicTime");
      if (savedTime) music.currentTime = parseFloat(savedTime);

      const musicAllowed = localStorage.getItem("musicAllowed") === "true";
      const isPaused = localStorage.getItem("musicPaused") === "true";

      toggleBtn.textContent = isPaused ? "â–¶ Click" : "â¸ Pause";

      if (musicAllowed && !isPaused) music.play().catch(()=>{});

      setInterval(() => {
        if (!music.paused) localStorage.setItem("musicTime", music.currentTime);
      }, 500);

      toggleBtn.onclick = (e) => {
        e.stopPropagation();
        if (music.paused) {
          music.play().then(() => {
            toggleBtn.textContent = "â¸ Pause";
            localStorage.setItem("musicPaused", "false");
            localStorage.setItem("musicAllowed", "true");
          }).catch(()=>{});
        } else {
          music.pause();
          toggleBtn.textContent = "â–¶ Play";
          localStorage.setItem("musicPaused", "true");
        }
      };
    }

    /* ---------- ENTER BUTTON ---------- */
    function enterSurprise() {
      if (music && music.paused) {
        music.play().catch(()=>{});
        localStorage.setItem("musicPaused", "false");
        localStorage.setItem("musicAllowed", "true");
      }
      setTimeout(() => { window.location.href = "wish.html"; }, 300);
    }

    /* ---------- BALLOONS ---------- */
    function generateBalloons() {
      if (!balloonContainer.hasChildNodes()) {
        const emojis = ["ğŸˆ","ğŸ‰","ğŸŠ"];
        for (let i = 0; i < 30; i++) {
          const b = document.createElement("span");
          b.className = "balloon";
          b.textContent = emojis[Math.floor(Math.random() * emojis.length)];
          b.style.left = Math.random() * 100 + "vw";
          b.style.fontSize = (20 + Math.random() * 30) + "px";
          b.style.animationDuration = (8 + Math.random() * 8) + "s";
          b.style.animationDelay = Math.random() * 5 + "s";
          balloonContainer.appendChild(b);
        }
      }
      balloonContainer.style.display = "block";
    }

    /* ---------- STEP FUNCTIONS ---------- */
    /* ---------- STEP FUNCTIONS ---------- */
function showPartyMood() {
  // Hide first question
  document.querySelector(".qa-box").style.display = "none";

  // Show party mood statement
  document.getElementById("partyMood").style.display = "block";

  // DO NOT switch CSS here yet, stays bright
}

function showBalloonPrompt() {
  // Hide party mood
  document.getElementById("partyMood").style.display = "none";

  // Switch to main night theme
  switchToMainCSS();

  // Show balloon prompt
  document.getElementById("balloonPrompt").style.display = "block";
}


    function showBalloons() {
      generateBalloons();
      document.getElementById("balloonPrompt").style.display = "none";
      document.getElementById("musicPrompt").style.display = "block";
    }

    function startMusic() {
      if (music) {
        music.play().catch(()=>{});
        toggleBtn.textContent = "â¸ Pause";
        localStorage.setItem("musicPaused", "false");
        localStorage.setItem("musicAllowed", "true");
      }
      document.getElementById("musicPrompt").style.display = "none";
      document.getElementById("hiddenContent").style.display = "block";
    }
  </script>

</body>
</html>
