<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Something Special ðŸŒ™</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>

<body class="night-bg">

  <!-- Balloons -->
  <div class="balloon-container"></div>

  <!-- Main Content -->
  <div class="container">
    <h1 id="title">Something special for you ðŸŒ™</h1>
    <p id="message">Just a little surpriseâ€¦ itâ€™s worth it ðŸ’«</p>
    <button id="musicToggle" class="music-btn">â–¶ Lets add some Music :)</button>
    <button class="enter-btn show-btn fade-in delay-3"
            onclick="enterSurprise()">
      Lets GOOO âžœ
    </button>
  </div>

  <!-- Background Music -->
  <audio id="bgMusic" loop>
    <source src="swim.mp3" type="audio/mpeg">
  </audio>

  <!-- Play / Pause Button -->


  <!-- Script -->
  <script>
    const music = document.getElementById("bgMusic");
    const toggleBtn = document.getElementById("musicToggle");

    /* ---------- MUSIC SETUP ---------- */
    if (music && toggleBtn) {

      // Restore playback time
      const savedTime = localStorage.getItem("musicTime");
      if (savedTime) {
        music.currentTime = parseFloat(savedTime);
      }

      // Restore state
      const musicAllowed = localStorage.getItem("musicAllowed") === "true";
      const isPaused = localStorage.getItem("musicPaused") === "true";

      toggleBtn.textContent = isPaused ? "â–¶ Play" : "â¸ Pause";

      // Auto-play on all pages AFTER first click
      if (musicAllowed && !isPaused) {
        music.play().catch(()=>{});
      }

      // Save current time
      setInterval(() => {
        if (!music.paused) {
          localStorage.setItem("musicTime", music.currentTime);
        }
      }, 500);

      // Play / Pause toggle
      toggleBtn.onclick = (e) => {
        e.stopPropagation();

        if (music.paused) {
          music.play().then(() => {
            toggleBtn.textContent = "â¸ Pause";
            localStorage.setItem("musicPaused", "false");
            localStorage.setItem("musicAllowed", "true"); // ðŸ”‘ key
          }).catch(()=>{});
        } else {
          music.pause();
          toggleBtn.textContent = "â–¶ Play";
          localStorage.setItem("musicPaused", "true");
        }
      };
    }

    /* ---------- ENTER BUTTON ---------- */
    function enterSurprise() {
      if (music && music.paused) {
        music.play().catch(()=>{});
        localStorage.setItem("musicPaused", "false");
        localStorage.setItem("musicAllowed", "true");
      }

      setTimeout(() => {
        window.location.href = "wish.html";
      }, 300);
    }

    /* ---------- BALLOONS (RUN ONCE) ---------- */
    const balloonContainer = document.querySelector(".balloon-container");
    if (balloonContainer) {
      const emojis = ["ðŸŽˆ","ðŸŽ‰","ðŸŽŠ"];
      for (let i = 0; i < 30; i++) {
        const b = document.createElement("span");
        b.className = "balloon";
        b.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        b.style.left = Math.random() * 100 + "vw";
        b.style.fontSize = (20 + Math.random() * 30) + "px";
        b.style.animationDuration = (8 + Math.random() * 8) + "s";
        b.style.animationDelay = Math.random() * 5 + "s";
        balloonContainer.appendChild(b);
      }
    }
  </script>

</body>
</html>


